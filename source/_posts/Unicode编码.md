---
title: Unicodeç¼–ç 
date: 2019-08-21
tags: è®¡ç®—æœºåŸºç¡€
---
------------

## Unicodeçš„å‰å› åæœ

è®¡ç®—æœºæ²¡æ³•ç›´æ¥å¤„ç†æ–‡æœ¬ï¼Œå®ƒåªå’Œ0 1æ•°å­—æ‰“äº¤é“ã€‚ä¸ºäº†åœ¨è®¡ç®—æœºé‡Œç”¨æ•°å­—è¡¨ç¤ºæ–‡æœ¬ï¼Œæˆ‘ä»¬æŒ‡å®šäº†ä¸€ä¸ªä»å­—ç¬¦åˆ°æ•°å­—çš„æ˜ å°„ã€‚è¿™ä¸ªæ˜ å°„å°±å«åšç¼–ç ï¼ˆencodingï¼‰ã€‚



**1967å¹´**ï¼Œå­—ç¬¦ç¼–ç **ASCII**æ­£å¼å‘å¸ƒã€‚ASCII ç æ˜¯ 7 ä½çš„ï¼Œå®ƒå°†è‹±æ–‡å­—æ¯ï¼Œæ•°å­— 0-9 ä»¥åŠä¸€äº›æ ‡ç‚¹ç¬¦å·å’Œæ§åˆ¶å­—ç¬¦æ˜ å°„ä¸º 0-127 è¿™äº›æ•´å‹ã€‚ è‹±è¯­ç”¨ 128 ä¸ªå­—ç¬¦æ¥ç¼–ç å®Œå…¨æ˜¯è¶³å¤Ÿçš„ï¼Œä½†æ˜¯ç”¨æ¥è¡¨ç¤ºå…¶ä»–è¯­è¨€ï¼Œ128 ä¸ªå­—ç¬¦æ˜¯è¿œè¿œä¸å¤Ÿçš„ã€‚äºšæ´²è¯­è¨€æœ‰æ›´å¤šçš„å­—ç¬¦éœ€è¦è¢«å­˜å‚¨ï¼Œä¸€ä¸ªå­—èŠ‚å·²ç»ä¸å¤Ÿç”¨äº†ã€‚äºæ˜¯ï¼Œäººä»¬å¼€å§‹ä½¿ç”¨ä¸¤ä¸ªå­—èŠ‚æ¥å­˜å‚¨å­—ç¬¦ã€‚

å„ç§å„æ ·ä¸ç»Ÿä¸€çš„ç¼–ç æ–¹å¼æˆäº†ç³»ç»Ÿå¼€å‘è€…çš„å™©æ¢¦ï¼Œä»–ä»¬æå‡ºäº†ä¸€ä¸ª**â€œå†…ç è¡¨â€**çš„æ¦‚å¿µï¼Œå¯ä»¥åˆ‡æ¢åˆ°ç›¸åº”è¯­è¨€çš„ä¸€ä¸ªå†…ç è¡¨ï¼Œè¿™æ ·æ‰èƒ½æ˜¾ç¤ºç›¸åº”è¯­è¨€çš„å­—æ¯ã€‚å¦‚æœä½ åœ¨ä¸€å°æœºå™¨ä¸Šå†™äº†ä¸€æ®µæ–‡å­—ï¼Œç„¶ååœ¨å¦ä¸€å°ä½¿ç”¨äº†ä¸åŒçš„å†…ç è¡¨çš„æœºå™¨ä¸Šæ‰“å¼€å°±ä¼šæ˜¾ç¤ºå‡ºé”™è¯¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœä½¿ç”¨å¤šè¯­ç§ï¼Œé‚£ä¹ˆå°±éœ€è¦é¢‘ç¹çš„åœ¨å†…ç è¡¨å†…è¿›è¡Œåˆ‡æ¢ã€‚

**1987å¹´**ï¼Œæ¥è‡ªå‡ ä¸ªå¤§çš„ç§‘æŠ€å…¬å¸ï¼ˆå…¶ä¸­åŒ…æ‹¬è‹¹æœå’Œ NeXTï¼‰çš„å·¥ç¨‹å¸ˆä»¬å¼€å§‹åˆä½œè‡´åŠ›äºå¼€å‘ä¸€ç§èƒ½åœ¨å…¨ä¸–ç•Œæ‰€æœ‰ä¹¦å†™ç³»ç»Ÿä¸­é€šç”¨çš„å­—ç¬¦ç¼–ç ç³»ç»Ÿï¼Œäº 1991 å¹´ 10 æœˆå‘å¸ƒçš„ 1.0.0 ç‰ˆæœ¬çš„ Unicode æ ‡å‡†å°±æ˜¯è¿™ä¸€åŠªåŠ›çš„æˆæœã€‚



**Unicode** æ˜¯ä¸€æœ¬å¾ˆåšçš„å­—å…¸ï¼Œä¸ºä¸–ç•Œä¸Šå‡ ä¹æ‰€æœ‰çš„ä¹¦å†™ç³»ç»Ÿé‡Œæ‰€ä½¿ç”¨çš„æ¯ä¸€ä¸ªå­—ç¬¦æˆ–ç¬¦å·å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€çš„æ•°å­—ã€‚è¿™ä¸ªæ•°å­—å«åš**ç ç‚¹ï¼ˆcode pointsï¼‰**ã€‚æœ€åˆï¼ŒUnicode ç¼–ç æ˜¯è¢«è®¾è®¡ä¸º 16 ä½çš„ï¼Œæä¾›äº† 65,536 ä¸ªå­—ç¬¦çš„ç©ºé—´ã€‚åæ¥è€ƒè™‘åˆ°è¦ç¼–ç å†å²ä¸Šçš„æ–‡å­—ä»¥åŠä¸€äº›å¾ˆå°‘ä½¿ç”¨çš„æ—¥æœ¬æ±‰å­—å’Œ**ä¸­å›½æ±‰å­—**ï¼ŒUnicode ç¼–ç æ‰©å±•åˆ°äº† 21 ä½ï¼ˆä» U+0000 åˆ° U+**10FFFF**ï¼‰ï¼Œè¿™ 21 ä½æä¾›äº† 1,114,112 ä¸ªç ç‚¹ï¼Œå…¶ä¸­ï¼Œåªæœ‰å¤§æ¦‚ 10% æ­£åœ¨ä½¿ç”¨ï¼Œè¿˜æœ‰å¾ˆå¤§çš„æ‰©å……ç©ºé—´ã€‚

![image-20210403204705833](Unicodeç¼–ç /unicode_image_1.png)



Unicodeç¼–ç ç©ºé—´è¢«åˆ†æˆ 17(1+2^4)ä¸ª**å¹³é¢**ï¼Œæ¯ä¸ªå¹³é¢æœ‰ 65,536 (2^16)ä¸ªå­—ç¬¦ã€‚0 å·å¹³é¢å«åš**ã€ŒåŸºæœ¬å¤šæ–‡ç§å¹³é¢ã€**ï¼Œæ¶µç›–äº†å‡ ä¹æ‰€æœ‰ä½ èƒ½é‡åˆ°çš„å­—ç¬¦ï¼Œ**é™¤äº† emoji**ã€‚å…¶å®ƒå¹³é¢å«åšè¾…åŠ©å¹³é¢ï¼Œå¤§å¤šæ˜¯ç©ºçš„ã€‚







## Unicodeç¼–ç è§£ç 

Unicodeçš„å®ç°æ–¹å¼ç§°ä¸ºUnicodeè½¬æ¢æ ¼å¼ï¼ˆUnicode Transformation Formatï¼Œç®€ç§°ä¸ºUTFï¼‰ã€‚

### UTF-8

UTF-8 æ˜¯ç›®å‰äº’è”ç½‘ä¸Šä½¿ç”¨æœ€å¹¿æ³›çš„ä¸€ç§ Unicode ç¼–ç æ–¹å¼ï¼Œå®ç°äº†å¯¹ ASCII ç çš„å‘åå…¼å®¹ã€‚å®ƒçš„æœ€å¤§ç‰¹ç‚¹å°±æ˜¯å¯å˜é•¿ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ 1 - 4 ä¸ªå­—èŠ‚è¡¨ç¤ºä¸€ä¸ªå­—ç¬¦ï¼Œæ ¹æ®å­—ç¬¦çš„ä¸åŒå˜æ¢é•¿åº¦ã€‚ç¼–ç è§„åˆ™å¦‚ä¸‹ï¼š



1ã€å¯¹äºå•ä¸ªå­—èŠ‚çš„å­—ç¬¦ï¼Œç¬¬ä¸€ä½è®¾ä¸º 0ï¼Œåé¢çš„ 7 ä½å¯¹åº”è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹ã€‚å› æ­¤ï¼Œå¯¹äºè‹±æ–‡ä¸­çš„ 0 - 127 å·å­—ç¬¦ï¼Œä¸ ASCII ç å®Œå…¨ç›¸åŒã€‚æ„å‘³ç€ ASCII ç ç”¨ UTF-8 ç¼–ç å…¼å®¹å®Œå…¨æ²¡æœ‰é—®é¢˜ã€‚



2ã€å¯¹äºéœ€è¦ä½¿ç”¨ N ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºçš„å­—ç¬¦ï¼ˆN > 1ï¼‰ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚çš„å‰ N ä½éƒ½è®¾ä¸º 1ï¼Œç¬¬ N + 1 ä½è®¾ä¸º0ï¼Œå‰©ä½™çš„ N - 1 ä¸ªå­—èŠ‚çš„å‰ä¸¤ä½éƒ½è®¾ä½ 10ï¼Œå‰©ä¸‹çš„äºŒè¿›åˆ¶ä½åˆ™ä½¿ç”¨è¿™ä¸ªå­—ç¬¦çš„ Unicode ç ç‚¹æ¥å¡«å……ã€‚



![image-20210403204705833](Unicodeç¼–ç /unicode_image_2.png)



â€œæ±‰â€çš„ Unicode ç ç‚¹æ˜¯ 0x6c49ï¼ˆ110 1100 0100 1001ï¼‰ï¼Œ0x6c49 éœ€è¦15ä½äºŒè¿›åˆ¶ä½æ•°ï¼Œé‚£ä¹ˆå¾—å‡ºå…¶æ ¼å¼ä¸º 1110xxxx 10xxxxxx 10xxxxxxã€‚æ¥ç€ï¼Œä»â€œæ±‰â€çš„äºŒè¿›åˆ¶æ•°æœ€åä¸€ä½å¼€å§‹ï¼Œä»åå‘å‰ä¾æ¬¡å¡«å……å¯¹åº”æ ¼å¼ä¸­çš„ xï¼Œå¤šå‡ºçš„ x ç”¨ 0 è¡¥ä¸Šã€‚è¿™æ ·ï¼Œå°±å¾—åˆ°äº†â€œæ±‰â€çš„ UTF-8 ç¼–ç ä¸º 11100110 10110001 10001001ï¼Œè½¬æ¢æˆåå…­è¿›åˆ¶å°±æ˜¯ 0xE6 0xB1 0x89ã€‚  



è§£ç çš„è¿‡ç¨‹ä¹Ÿååˆ†ç®€å•ï¼šå¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½æ˜¯ 0 ï¼Œåˆ™è¯´æ˜è¿™ä¸ªå­—èŠ‚å¯¹åº”ä¸€ä¸ªå­—ç¬¦ï¼›å¦‚æœä¸€ä¸ªå­—èŠ‚çš„ç¬¬ä¸€ä½1ï¼Œé‚£ä¹ˆè¿ç»­æœ‰å¤šå°‘ä¸ª 1ï¼Œå°±è¡¨ç¤ºè¯¥å­—ç¬¦å ç”¨å¤šå°‘ä¸ªå­—èŠ‚



### UTF-16

UTF-16 ç¼–ç ä»‹äº UTF-32 ä¸ UTF-8 ä¹‹é—´ï¼ŒåŒæ—¶ç»“åˆäº†å®šé•¿å’Œå˜é•¿ä¸¤ç§ç¼–ç æ–¹æ³•çš„ç‰¹ç‚¹ã€‚ç¼–ç è§„åˆ™ï¼š**åŸºæœ¬å¹³é¢çš„å­—ç¬¦å ç”¨ 2 ä¸ªå­—èŠ‚ï¼ˆU+0000 åˆ° U+FFFFï¼‰ï¼Œè¾…åŠ©å¹³é¢çš„å­—ç¬¦å ç”¨ 4 ä¸ªå­—èŠ‚ï¼ˆU+010000 åˆ° U+10FFFFï¼‰**ã€‚

å½“æˆ‘ä»¬é‡åˆ°ä¸¤ä¸ªå­—èŠ‚æ—¶ï¼Œåˆ°åº•æ˜¯æŠŠè¿™ä¸¤ä¸ªå­—èŠ‚å½“ä½œä¸€ä¸ªå­—ç¬¦è¿˜æ˜¯ä¸åé¢çš„ä¸¤ä¸ªå­—èŠ‚ä¸€èµ·å½“ä½œä¸€ä¸ªå­—ç¬¦å‘¢ï¼Ÿ

è¾…åŠ©å¹³é¢çš„å­—ç¬¦ä½å…±æœ‰ 2^20 (2^4ä¸ªå¹³é¢ï¼Œæ¯ä¸ªé‡Œé¢ 2^16)ä¸ªï¼Œå› æ­¤è¡¨ç¤ºè¿™äº›å­—ç¬¦è‡³å°‘éœ€è¦ 20 ä¸ªäºŒè¿›åˆ¶ä½ã€‚UTF-16 å°†è¿™ 20 ä¸ªäºŒè¿›åˆ¶ä½åˆ†æˆä¸¤åŠï¼Œå‰ 10 ä½æ˜ å°„åœ¨ U+D800 åˆ° U+DBFFï¼Œç§°ä¸ºé«˜ä½ï¼ˆHï¼‰ï¼Œå 10 ä½æ˜ å°„åœ¨ U+DC00 åˆ° U+DFFFï¼Œç§°ä¸ºä½ä½ï¼ˆLï¼‰ï¼Œå‰©ä¸‹çš„6ä½å½“åšæ ‡å¿—æ¥åŒºåˆ†åŸºæœ¬å¹³é¢å’Œè¾…åŠ© å¹³é¢ã€‚è¿™æ„å‘³ç€ï¼Œä¸€ä¸ªè¾…åŠ©å¹³é¢çš„å­—ç¬¦ï¼Œè¢«æ‹†æˆä¸¤ä¸ªåŸºæœ¬å¹³é¢çš„å­—ç¬¦è¡¨ç¤ºã€‚



ä¸ºäº†é…åˆUTF-16ï¼ŒUnicodeä¸­ä¹Ÿå°†è¿™ä¸¤ä¸ªåŒºé—´å±è”½æ‰ï¼Œä¸å…è®¸åˆ†é…ä»»ä½•å­—ç¬¦

1101 10xx xxxx xxxxï¼ŒåŒºé—´å°±æ˜¯D800~DBFF

1101 11xx xxxx xxxxï¼ŒåŒºé—´å°±æ˜¯DC00~DFFF



### UTF-32

UTF-32æ¯ä¸ªç ç‚¹ä¸Šä½¿ç”¨æ•´ 32 ä½ã€‚32 å¤§äº 21ï¼Œå› æ­¤æ¯ä¸€ä¸ª UTF-32 å€¼éƒ½å¯ä»¥ç›´æ¥è¡¨ç¤ºå¯¹åº”çš„ç ç‚¹ã€‚å°½ç®¡ç®€å•ï¼ŒUTF-32å´å‡ ä¹ä»æ¥ä¸åœ¨å®é™…ä¸­ä½¿ç”¨ï¼Œå› ä¸ºæ¯ä¸ªå­—ç¬¦å ç”¨ 4 å­—èŠ‚å¤ªæµªè´¹ç©ºé—´äº†ã€‚





## Unicodeä¸­çš„Emoji

> 1999å¹´å‰åï¼Œæ—¥æœ¬ä¸€ä¸ªåå«æ —ç”°ç©°å´‡çš„å¹´è½»äººï¼Œå’Œè®¸å¤šç›´ç”·ä¸€æ ·ï¼Œ ç»™å¥³å‹å‘çš„çŸ­ä¿¡ç»å¸¸ä¼šè¢«è¯¯è§£ã€‚æ¯”å¦‚ï¼Œâ€œçŸ¥é“äº†â€è¢«è§£è¯»æˆâ€œç”Ÿæ°”äº†â€ã€â€œä¸è€çƒ¦äº†â€ï¼Œéšåå¼•å‘å†·æˆ˜ã€‚ äºæ˜¯å°‘å¹´æ —ç”°æƒ³ï¼šâ€œå¦‚æœèƒ½åœ¨æ–‡å­—é‡Œæ’å…¥ä¸€äº›è¡¨æƒ…ç¬¦å·æ¥è¡¨è¾¾æ„Ÿæƒ…ï¼Œå¤§å®¶åº”è¯¥ä¼šéœ€è¦å§ï¼â€

> åŸå§‹çš„Emojiå°±è¿™ä¹ˆè¯ç”Ÿäº†ã€‚

### Emojiçš„ç¼–ç 

åœ¨æ™®é€šçš„èŠå¤©è½¯ä»¶ä¸­ï¼Œä¸€äº›åŸºæœ¬è¡¨æƒ…æ˜¯é‡‡ç”¨æ™®é€šå­—ç¬¦çš„è½¬ä¹‰è¡¨ç¤ºã€‚æ¯”å¦‚åœ¨å­—ç¬¦ä¸²ä¸­æ£€æµ‹åˆ°[å¾®ç¬‘]ï¼Œå°±è‡ªåŠ¨æ›¿æ¢ä¸ºè¡¨æƒ…å›¾ç‰‡ã€‚

ä½†æ˜¯Emojiæ˜¯ä¸€ç§ç‰¹æ®Šçš„å­—ç¬¦ï¼Œå®ƒæ˜¯çœŸæ­£è¢«ç¼–ç å…¥Unicodeçš„å­—ç¬¦ã€‚å¤§éƒ¨åˆ†Emojiåœ¨å­—ç¬¦é›†é‡Œå¤„äºU+1F300åˆ°U+1F9EFä¸­çš„éƒ¨åˆ†èŒƒå›´ï¼ˆ1å·å¹³é¢ï¼‰ã€‚

### Unicodeç»„åˆå­—ç¬¦

Unicode åŒ…å«ä¸€ä¸ªç³»ç»Ÿï¼Œå¯ä»¥åˆå¹¶å¤šä¸ªç¼–ç ç‚¹ï¼ŒåŠ¨æ€ç»„åˆå­—ç¬¦ã€‚æ­¤ç³»ç»Ÿç”¨å„ç§æ–¹å¼å¢åŠ çµæ´»æ€§ï¼Œè€Œä¸å¼•èµ·ç¼–ç ç‚¹çš„å·¨å¤§ç»„åˆè†¨èƒ€ã€‚



ç”¨æˆ·è®¤ä¸ºçš„ä¸€ä¸ªâ€œå­—ç¬¦â€ äº‹å®ä¸Šåº•ä¸‹å¯èƒ½ç”±å¤šä¸ªç¼–ç ç‚¹ç»„æˆã€‚Unicode ä½¿ç”¨ã€Œå­—ä½ç°‡ã€çš„æ¦‚å¿µæ¥è¡¨ç¤ºè¿™ç§æƒ…å†µã€‚ä¸€ä¸ªç”±ä¸€ä¸ªæˆ–å¤šä¸ªç¼–ç ç‚¹ç»„æˆçš„å­—ç¬¦ä¸²æ„æˆä¸€ä¸ª â€œç”¨æˆ·æ„ŸçŸ¥çš„å­—ç¬¦â€ã€‚



å­—ä½ç°‡ä¸»è¦è¢«ç”¨åœ¨æ–‡æœ¬ç¼–è¾‘ï¼šå®ƒä»¬å¯¹å…‰æ ‡å’Œæ–‡æœ¬é€‰æ‹©æ¥è¯´æ˜¯æœ€æ˜æ˜¾çš„å•å…ƒã€‚ä½¿ç”¨å­—ä½ç°‡ï¼Œç¡®ä¿åœ¨å¤åˆ¶å’Œç²˜è´´æ–‡æœ¬æ—¶ä¸ä¼šçªç„¶ä¸¢æ‰ä¸€äº›ç¬¦å·ï¼ŒåŒæ—¶å·¦å³æ–¹å‘é”®ä¹Ÿæ€»æ˜¯ä»¥ä¸€ä¸ªå¯è§å­—ç¬¦çš„è·ç¦»ç§»åŠ¨ï¼Œç­‰ç­‰ã€‚

[æ›´å¤šEmojiç»„åˆå­—ç¬¦ä¿¡æ¯](https://juejin.im/post/5c00b31a5188251d9e0c4a59)



ä»£ç ç¤ºä¾‹ï¼š

```
val smile  =  "ğŸ˜€"

print("smile emoji length = ${smile.length}")

val flag = "ğŸ‡¨ğŸ‡³"

print("flag emoji length = ${flag.length}")

val portrait = "ğŸ‘©ğŸ½â€ğŸ¦³"

print("portrait emoji length = ${portrait.length}")

val family = "ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘§"

print("family emoji length = ${family.length}")



smile emoji length = 2 

flag emoji length = 4 

portrait emoji length = 7 

family emoji length = 11
```

### 

## Java/Androidä¸Unicode

Javaæœ€åˆè®¾è®¡çš„Charactorç”¨ä¸¤ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºunicodeå­—ç¬¦ï¼Œè¿™æ²¡æœ‰é—®é¢˜ï¼Œ å› ä¸ºæœ€åˆunicodeåªæœ‰16ä½å¹¶ä¸”å­—ç¬¦è¿˜æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯Unicode 4.0(äº‹å®ä¸Šè‡ªUnicode 3.1), å­—ç¬¦é›†è¿›è¡Œå¾ˆå¤§çš„æ‰©å……ï¼Œå·²ç»è¾¾åˆ°äº†96,447ä¸ªå­—ç¬¦ï¼ŒUnicode 11.0å·²ç»åŒ…å«137,374ä¸ªå­—ç¬¦ï¼Œ2^16å·²ç»è¿œè¿œä¸å¤Ÿå­˜å‚¨äº†ã€‚



### Javaç¼–ç æ–¹å¼ï¼šJVMä¹‹å¤–å’ŒJVMä¹‹å†…

JVMä¹‹å¤–ï¼šJavaæºæ–‡ä»¶(.java)å’Œç¼–è¯‘åçš„.classæ–‡ä»¶ï¼Œæºæ–‡ä»¶å¯ä»¥é‡‡ç”¨å¤šç§ç¼–ç æ ¼å¼å¦‚utf-8(unix linuxå¹³å°é»˜è®¤) æˆ–è€…gbk(windowså¹³å°é»˜è®¤)ï¼Œå½“å°†æºç ç”¨javacç¼–è¯‘çš„æ—¶å€™ï¼Œ**é»˜è®¤æ˜¯javacæŒ‰ç…§ç³»ç»Ÿé»˜è®¤çš„ç¼–ç æ ¼å¼è¯»å–javaæºæ–‡ä»¶**ï¼Œ ç„¶åä»¥utf-8çš„æ ¼å¼è¾“å‡ºåˆ°.classæ–‡ä»¶ä¸­ï¼Œæ¢å¥è¯è¯´ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹unixå¹³å°ï¼Œjavacç”¨utf-8æ ¼å¼è¯»å–javaæºæ–‡ä»¶ ç„¶åä»¥utf-8æ ¼å¼å†™.classï¼›åœ¨é»˜è®¤æƒ…å†µä¸‹windowså¹³å°ï¼Œjavacç”¨gbkæ ¼å¼è¯»å–javaæºæ–‡ä»¶ç„¶åä»¥utf-8æ ¼å¼å†™.class

å¦‚æœæºæ–‡ä»¶çš„ç¼–ç æ ¼å¼ä¸é‡‡ç”¨æ“ä½œç³»ç»Ÿé»˜è®¤æ ¼å¼å¯èƒ½ä¼šå¯¼è‡´é”™è¯¯è¡¨ç°ï¼Œåœ¨windowså¹³å°ä¸‹ç”¨utf-8æ ¼å¼ä¿å­˜javaæºæ–‡ä»¶ï¼Œå¦‚æœä¸é‡‡ç”¨Ide(Ideä¼šæ™ºèƒ½æ ¹æ®æ–‡ä»¶ç¼–ç æ ¼å¼å‘Šè¯‰javacç”¨æ­£ç¡®çš„æ–¹å¼)ï¼Œç›´æ¥ç”¨javacç¼–è¯‘è¯¥æºæ–‡ä»¶ï¼Œåˆ™ä¼šé€ æˆä¹±ç ï¼ˆæ–‡ä»¶ä¿å­˜ç¼–ç æ ¼å¼å’Œè¯»å–ç¼–ç æ ¼å¼çš„ä¸åŒ¹é…ï¼‰



JVMä¹‹å†…ï¼šå½“è¿è¡Œjavaå­—èŠ‚ç æ—¶ï¼Œè¯»å…¥åˆ°å†…å­˜é‡Œçš„å­—ç¬¦æˆ–è€…å­—ç¬¦ä¸²å…¨éƒ¨éƒ½ç”¨charæˆ–char[]è¡¨ç¤ºï¼Œè€Œcharæ˜¯é‡‡ç”¨UTF-16çš„ 



### Androidç¼–ç æ–¹å¼

Androidç³»ç»Ÿæ˜¯åŸºäºlinuxå†…æ ¸çš„ï¼Œæ‰€ä»¥é»˜è®¤çš„Unicodeç¼–ç æ–¹å¼ä¸ºUTF-8

![img](Unicodeç¼–ç /unicode_image_3.png)



### å¼€å‘ä¸­å¤„ç†Unicode

- > **Code Point**: ä»£ç ç‚¹ï¼Œä¸€ä¸ªå­—ç¬¦çš„æ•°å­—è¡¨ç¤ºã€‚ä¸€ä¸ªå­—ç¬¦é›†ä¸€èˆ¬å¯ä»¥ç”¨ä¸€å¼ æˆ–å¤šå¼ ç”±å¤šä¸ªè¡Œå’Œå¤šä¸ªåˆ—æ‰€æ„æˆçš„äºŒç»´è¡¨æ¥è¡¨ç¤ºã€‚äºŒç»´è¡¨ä¸­è¡Œä¸åˆ—äº¤å‰çš„ç‚¹ç§°ä¹‹ä¸ºä»£ç ç‚¹ï¼Œæ¯ä¸ªç ç‚¹åˆ†é…ä¸€ä¸ªå”¯ä¸€çš„ç¼–å·æ•°å­—ï¼Œç§°ä¹‹ä¸ºç ç‚¹å€¼æˆ–ç ç‚¹ç¼–å·ï¼Œé™¤å¼€æŸäº›ç‰¹æ®ŠåŒºåŸŸ(æ¯”å¦‚ä»£ç†åŒºã€ä¸“ç”¨åŒº)çš„éå­—ç¬¦ä»£ç ç‚¹å’Œä¿ç•™ä»£ç ç‚¹ï¼Œæ¯ä¸ªä»£ç ç‚¹å”¯ä¸€å¯¹åº”äºä¸€ä¸ªå­—ç¬¦ã€‚ ä»U+0000 åˆ° U+10FFFFã€‚

- > **Code Unit**ï¼šä»£ç å•å…ƒï¼Œæ˜¯æŒ‡ä¸€ä¸ªå·²ç¼–ç çš„æ–‡æœ¬ä¸­å…·æœ‰æœ€çŸ­çš„æ¯”ç‰¹ç»„åˆçš„å•å…ƒã€‚å¯¹äº UTF-8 æ¥è¯´ï¼Œä»£ç å•å…ƒæ˜¯ 8 æ¯”ç‰¹é•¿ï¼›å¯¹äº UTF-16 æ¥è¯´ï¼Œä»£ç å•å…ƒæ˜¯ 16 æ¯”ç‰¹é•¿ã€‚æ¢ä¸€ç§è¯´æ³•å°±æ˜¯ UTF-8 çš„æ˜¯ä»¥ä¸€ä¸ªå­—èŠ‚ä¸ºæœ€å°å•ä½çš„ï¼ŒUTF-16 æ˜¯ä»¥ä¸¤ä¸ªå­—èŠ‚ä¸ºæœ€å°å•ä½çš„ã€‚



Javaçš„å­—ç¬¦åœ¨å†…éƒ¨ä»¥UTF-16ç¼–ç æ–¹å¼æ¥è¡¨ç¤ºï¼Œå½“å­—ç¬¦çš„Code Pointåœ¨0å·å¹³é¢ï¼Œä¸€ä¸ªCode Unitå°±èƒ½æ ‡è¯†å­—ç¬¦ã€‚**æ—¥å¸¸å¼€å‘ä¸­éœ€è¦æ³¨æ„çš„æ˜¯ä¸€äº›ä¸å¸¸ç”¨æ±‰å­—å’Œemojiï¼Œä»–ä»¬ä¼šå ç”¨å¤šä¸ª****Code Unit****ã€‚**

![img](Unicodeç¼–ç /unicode_image_4.png)

![img](Unicodeç¼–ç /unicode_image_5.png)

String.lengthè¿”å›çš„æ˜¯Code Unitçš„é•¿åº¦ï¼Œè€Œä¸æ˜¯Unicodeä¸­å­—ç¬¦çš„é•¿åº¦ã€‚å¯¹äº0å·å¹³é¢çš„ä»£ç ç‚¹ï¼ŒString.lengthå’Œæˆ‘ä»¬ä¼ ç»Ÿç†è§£çš„å­—ç¬¦çš„æ•°é‡æ˜¯ä¸€è‡´çš„ï¼Œå¯¹äºæ‰©å±•çš„å­—ç¬¦ï¼ŒString.lengthå¯èƒ½æ˜¯æˆ‘ä»¬ç†è§£çš„å­—ç¬¦é•¿åº¦çš„ä¸¤å€ï¼Œç»„åˆå­—ç¬¦å¯èƒ½ä¼šæœ‰æ›´å¤šå˜åŒ–ã€‚

ä»¥æ±‰å­—â€ğ ®·â€ä¸ºä¾‹ï¼Œæ±‰å­—â€ğ ®·â€çš„ Unicode ç ç‚¹ä¸º 0x20BB7ï¼Œè¯¥ç ç‚¹è¶…å‡ºäº†åŸºæœ¬å¹³é¢çš„èŒƒå›´ï¼ˆ0x0000 - 0xFFFFï¼‰ï¼Œå› æ­¤éœ€è¦ä½¿ç”¨å››ä¸ªå­—èŠ‚è¡¨ç¤ºã€‚



æ‰€ä»¥æˆ‘ä»¬å¹³æ—¶åœ¨è¿›è¡Œå­—ç¬¦ä¸²æˆªå–çš„æ—¶å€™ï¼Œä¸èƒ½å¤ªè¿‡ä¾èµ–String.lengthçš„ç»“æœï¼Œå°¤å…¶æ˜¯ç»å¸¸ä½¿ç”¨çš„emojiså­—ç¬¦ã€‚



è‡ª Java 1.5 java.lang.Stringå°±æä¾›äº†Code Pointç›¸å…³æ–¹æ³•ï¼Œ ç”¨æ¥è·å–å®Œæ•´çš„Unicodeå­—ç¬¦å’ŒUnicodeå­—ç¬¦æ•°é‡:

- public int codePointAt(int index)    //è·å–indexä»£ç ç‚¹çš„åè¿›åˆ¶è¡¨ç¤º
- public int codePointBefore(int index)     //è·å–index-1ä»£ç ç‚¹çš„åè¿›åˆ¶è¡¨ç¤º
- **public int codePointCount(int beginIndex, int endIndex)**      //è·å–beginIndexåˆ°endIndexä¹‹é—´çš„**ä»£ç ç‚¹æ•°é‡**
- **public default IntStream codePoints()**   String.codePoints().toArray()å¯ä»¥å¾—åˆ°ä»£ç ç‚¹çš„åè¿›åˆ¶æ•°ç»„

æ³¨æ„è¿™äº›æ–¹æ³•ä¸­çš„indexä½¿ç”¨çš„æ˜¯code unitå€¼ã€‚



### ç¼–ç æ–¹å¼çš„encode/decode

åˆ©ç”¨String.getBytes() å’Œ new String() æ¥è¿›è¡Œç¼–ç è½¬æ¢

![img](Unicodeç¼–ç /unicode_image_6.png)

![img](Unicodeç¼–ç /unicode_image_7.png)

  

```
String s="ä½ å¥½";



byte[] bytes=s.getBytes();//andoridå¹³å°é»˜è®¤æ˜¯utf-8,ç¼–ç æ¯ä¸ªå­—ç¬¦å 3ä¸ªå­—èŠ‚

System.out.println(Arrays.toString(bytes));//[-28, -67, -96, -27, -91, -67]



String s1=new String(s.getBytes("utf-8"), "gbk");//æµ£çŠ²ã‚½

String s1=new String(s.getBytes("gbk"), "utf-8");//???



//æ­£ç¡®è½¬ç æ–¹å¼

return new String( s.getBytes("utf-8") , "utf-8");
```



URLEncoder.*encode*(url)/URLDecoder.*decode*(url) 

![img](Unicodeç¼–ç /unicode_image_8.png)

